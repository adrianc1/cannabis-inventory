<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="/tailwind.css" rel="stylesheet" />
		<title>Adjust Quantity</title>
	</head>
	<body class="bg-gray-50 min-h-screen">

            <a href="/products" class="inline-flex items-center px-4 py-2 mt-4 bg-stone-100 border border-stone-200 text-stone-700 rounded-md hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-800 transition-all shadow-sm">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            Back to products
            </a>      

                <form
					data-id="<%= product.id %>"
                    data-lot="<%= selectedBatch.lot_number %>"
					id="adjust-form"
					method="POST"
					action="/products/<%= product.id %>/adjust/<%= selectedBatch.lot_number %>"
					class="space-y-6 px-8 mt-8"
				>
					
                        <div class="flex items-center gap-2">
                            <p class="text-md font-semibold text-gray-700"> Product Name: </p>
                            <div class="text-2xl font-bold text-green-800"><%= product.name %></div>
                        </div>
					
                        <div class="">
                             <p class="text-md font-semibold text-gray-700"> Description: </p>
                            <div class="text-lg text-gray-800"><%= product.description %></div>
                        </div>

		<div class="grid gap-4">
    
                        <div class="w-full flex justify-between ">
                            <div class="">
                                 <p class="text-md font-semibold text-gray-700"> Brand: </p>
                                <div class="text-lg text-gray-800"><%= brand.name %></div>
                            </div>
                             <div class="">
                                 <p class="text-md font-semibold text-gray-700"> Strain: </p>
                                <div class="text-lg text-gray-800"><%= strain.name %></div>
                            </div>
                            <div class="">
                                 <p class="text-md font-semibold text-gray-700"> Category: </p>
                                <div class="text-lg text-gray-800"><%= category.name %></div>
                            </div>
                        </div>
    
    
                        <div>
                        <label for="quantity" class="block text-sm font-semibold text-gray-700 mb-2">
                                Quantity
                        </label>
                        <input
                         type="number"
                         name="quantity"
                         id="quantity"
                         value="<%= selectedBatch.quantity %>"
                         step="0.001"
                         min="0"
                         required
                         class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-emerald-600 focus:outline-none transition-colors bg-white"
                        >
                        </div>

                        <div>
                            <label for="unit" class="block text-sm font-semibold text-gray-700 mb-2">
                                Unit
                            </label>
                            <select
                                name="unit"
                                id="unit"
                                class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-emerald-600 focus:outline-none transition-colors bg-white"
                            >
                                <option><%= product.unit %></option>
                                <% units.forEach((unit, index) => { %>
                                <option value="<%= unit %>"><%= unit %></option>
                                <% }) %>
                            </select>
                        </div>

         </div>         
                    <div>
                        <label for="quantity" class="block text-sm font-semibold text-gray-700 mb-2">
                                Cost Price
                        </label>
                        <input
                         type="number"
                         name="cost_price_unit"
                         id="cost_price_unit"
                         value="<%= selectedBatch.cost_price %>"
                         step="0.01"
                         min="0"
                         required
                         class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-emerald-600 focus:outline-none transition-colors bg-white"
                        >
                        </div>

					  <div>
                            <label for="movement_type" class="block text-sm font-semibold text-gray-700 mb-2">
                                Reason:
                            </label>
                            <select
                                name="movement_type"
                                id="movement_type"
                                class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-emerald-600 focus:outline-none transition-colors bg-white"
                            >
                                <option>Select an option</option>
                                <% adjustmentReasons.forEach((reason, index) => { %>
                                <option value="<%= reason %>"><%= reason %></option>
                                <% }) %>
                            </select>
                        </div>

                        <div>
                            <label for="status" class="block text-sm font-semibold text-gray-700 mb-2">
                                Status
                            </label>
                            <select
                                name="status"
                                id="status"
                                class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-emerald-600 focus:outline-none transition-colors bg-white"
                            >
                                <option><%= selectedBatch.status %></option>
                                <% statusOptions.forEach((status, index) => { %>
                                <option value="<%= status %>"><%= status %></option>
                                <% }) %>
                            </select>
                        </div>

                        <div>
						<label
							for="notes"
							class="block text-sm font-semibold text-gray-700 mb-2"
						>
							Notes: 
						</label>
						<textarea
							id="notes"
							name="notes"
							rows="3"
							placeholder="Additional notes"
							class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-emerald-600 focus:outline-none transition-colors resize-none"
						></textarea>
					</div>

					<div class="flex gap-3 pt-4">
						<button type="submit" id="edit-btn" class="btn-primary flex-1">
							Update Quantity
						</button>
						<a href="/products/<%= product.id %>" class="btn-secondary flex-1 text-center">
							Cancel
						</a>
					</div>
        </form>
        <script src="/js/adjustInventory.js"></script>
	</body>
</html>
